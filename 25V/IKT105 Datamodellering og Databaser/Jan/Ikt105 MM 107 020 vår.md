Prøve(prøvenr, enr, fornavn, dato, vid, vnavn, ph, temp)

enr -> fornavn
vid -> vnavn
prøvenr -> enr, dato, vid, ph, temp

PK = prøvenr

Hvis vi anatar at dato er en atomær datatype er tabellen på første normalform. Fast postlengde.
Den er også på andre normalform siden ID-felt kun har en kolonne.
Men ikke på tredje normalform siden fornavn avhenger av enr, og vnavn avhenger av vid som transitive avhengigheter.

For å normalisere til 3dje normalform flytter vi fornavn i en egen tabell, og vnavn ut i en egentabell med respektive enr og vid som primærnøkler. Dette gjør enr og vid om til fremmednøkler i prøvetabellen.

Prøve(prøvenr, enr, dato, vid, ph, temp)
Elev(enr, fornavn)
Vann(vid, vnavn)

Teststasjoner
a.
![[5q3ij.png]]
Introduserer ID i nærkontakt fordi vi ikke kan vite om at en person kan være nærkontakt til flere.
I ett mer robust system hadde det vært mer naturlig at nærkontakt knyttet sammenalle personene 
(tabellen) med prøveNr. Altså at nærkontakt blir en slags assosiativ enhet i mellom.
b.

Testklinikk(>TKKlinikk, kom, Legekode, HTlf)

Teststasjon(>TSKode, +TKKlinikk Tadr, Tmob, Teamkode)

Person(>PNr, PNavn, PAdr, PTlf, Pyrke, APlass)

Prøve(>PrNr, +TSKode, Tidspunkt, PNr, PRes)



Nærkontakt(>NID, +PrNr, Navn, Tlf)
1 1 Peter
2 1
3 2  Peter
4 2
5 3
6 2
7
8
9

```sql
# a.
SELECT *
FROM logg;
```
Bruker SELECT * for å hente ut alle kolonnene fra tabellen logg.

```sql
#b. 
SELECT dato, tlfnr_til, ant_minutter
FROM logg
WHERE tlfnr_fra=12345678
AND ant_minutter IS NOT NULL
ORDER BY dato DESC; # nyeste først
```
Velger dato, tlfnr_til og ant_minutter med SELECT
fra tabellen logg.
Bruker WHERE For å kun velge radene som inneholder samtaler der avsender er 123455678 samtidig som at antall minutter ikke er null, siden ant_minutter != NULL betyr at det er en samtale og ikke melding.
Sorterer på nedadgående datao, ekller nyeste først.

```sql
#c. 
SELECT tlfnr_fra AS tlfnr, SUM(ant_minutter) AS tot_minutter, COUNT(tekst) AS ant_meldinger
# COUNT() teller ikke verdier som er NULL, derfor kan vi bruke dette for å finne ant_meldinger
FROM logg
WHERE YEAR(dato) = '2013' AND MONTH(dato) = 11
GROUP BY tlfnr_fra
```
Bruker AS for å lage alias for navnene slik at det matcher kravet i oppgaven.
Bruker SUM for å legge sammen antal minutter, og COUNT(Tekst) for å telle hvor mange meldinger det er. Vi kan bruke COUNT(tekst) siden COUNT ikke teller nullmerker.
Vi grupperer på tlfnr_fra siden vi har lyst til å finne antall minutter og meldinger per tlfnr.
```sql
#d.
SELECT l.dato, t.kunde_id AS SenderID, t2.kunde_id AS MottakerID, l.tekst AS Innhold 
FROM logg AS l, telefon AS t, telefon AS t2
WHERE l.tlfnr_fra = t.tlfnr AND l.tlfnr_til = t2.tlfnr
AND UPPER(tekst) LIKE '%SPION%'
ORDER BY l.dato;
```
Vi velger dato, kundeid for sennder,kundeid for mottaker, og meldingsteksten.
I FROM bruker vi AS l, for å lage et alias. Vi velger telefon tabellen to ganger siden vi skal ha inform,asjon om både sender og mottaker.
Vi JOiner (kobler) opp tabellene i WHERE og setter fra lik til den første t, og til lik den andre.
OG vi sjekker om teksten inneholder spion hvor som helst. Vi bruker upper(text) slik at dette funker uansett om de har brukt store eller små bokstaver i ordet.
Vi ordner/sorterer på dato.


5 DAT202_MM-107 - Vanlige_SP - ACID  
Hva står transaksjonsegenskapene ACID for. Hvilke andre konsepter innen databaser hjelper til å  
dekke egenskapene til hver enkelt bokstav i ACID prinsippet?
A - Atomicity
Atomicity betyr at operasjonen er udelelig
Konsepter som Rollback og commit hjelper med Atomicity. logging og journal
C - Consistency
constraints
integreitetsregler
	
I - Isolation
Låsing
Seriell utførelse
isolasjonsnivåer som read uncommited, read commited, 

D - Durability
Journaling logger
checkpointing
RAID systemer

6 DAT202_MM-107 - Vanlige_SP - Relasjoner  
Forklar om relasjoner mellom objekter, entiteter og tabeller og hvordan dette gjøres i både modell 
og tabell form?


13.
1. Denne spørringen vil gi ut alle navn som har 'er' inne i seg. Dette er fordi % markerer at det ikke betyr noe hva som står det. siden % er foran og etter.


I Codds relasjonsalgebra er en **tabell** (eller relasjon) faktisk en matematisk relasjon. En tabell består av rader (tupler) og kolonner (attributter), og hver rad representerer et tuppel i en matematisk mengde. Så ja, en tabell er en matematisk relasjon i relasjonsalgebra.


(1, 2)
(2, 1)

x y
1 2


