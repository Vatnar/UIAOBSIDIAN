Prøve(prøvenr, enr, fornavn, dato, vid, vnavn, ph, temp)

enr -> fornavn
vid -> vnavn
prøvenr -> enr, dato, vid, ph, temp

PK = prøvenr

Hvis vi anatar at dato er en atomær datatype er tabellen på første normalform. Fast postlengde.
Den er også på andre normalform siden ID-felt kun har en kolonne.
Men ikke på tredje normalform siden fornavn avhenger av enr, og vnavn avhenger av vid som transitive avhengigheter.

For å normalisere til 3dje normalform flytter vi fornavn i en egen tabell, og vnavn ut i en egentabell med respektive enr og vid som primærnøkler. Dette gjør enr og vid om til fremmednøkler i prøvetabellen.

Prøve(prøvenr, enr, dato, vid, ph, temp)
Elev(enr, fornavn)
Vann(vid, vnavn)

Teststasjoner
a.
![[5q3ij.png]]
Introduserer ID i nærkontakt fordi vi ikke kan vite om at en person kan være nærkontakt til flere.
I ett mer robust system hadde det vært mer naturlig at nærkontakt knyttet sammenalle personene (tabellen) med prøveNr. Altså at nærkontakt blir en slags assosiativ enhet i mellom.
b.

Testklinikk(>TKKlinikk, kom, Legekode, HTlf)

Teststasjon(>TSKode, +TKKlinikk Tadr, Tmob, Teamkode)

Person(>PNr, PNavn, PAdr, PTlf, Pyrke, APlass)

Prøve(>PrNr, +TSKode, Tidspunkt, PNr, PRes)

Nærkontakt(>NID, +PrNr Navn, Tlf)

```sql
# a.
SELECT *
FROM logg;
```
Bruker SELECT * for å hente ut alle kolonnene fra tabellen logg.

```sql
#b. 
SELECT dato, tlfnr_til, ant_minutter
FROM logg
WHERE tlfnr_fra=12345678
AND ant_minutter IS NOT NULL
ORDER BY dato DESC; # nyeste først
```
Velger dato, tlfnr_til og ant_minutter med SELECT
fra tabellen logg.
Bruker WHERE For å kun velge radene som inneholder samtaler der avsender er 123455678 samtidig som at antall minutter ikke er null, siden ant_minutter != NULL betyr at det er en samtale og ikke melding.
Sorterer på nedadgående datao, ekller nyeste først.

```sql
#c. 
SELECT tlfnr_fra AS tlfnr, SUM(ant_minutter) AS tot_minutter, COUNT(tekst) AS ant_meldinger
# COUNT() teller ikke verdier som er NULL, derfor kan vi bruke dette for å finne ant_meldinger
FROM logg
WHERE YEAR(dato) = '2013' AND MONTH(dato) = 11
GROUP BY tlfnr_fra
```
Bruker AS for å lage alias for navnene slik at det matcher kravet i oppgaven.
Bruker SUM for å legge sammen antal minutter, og COUNT(Tekst) for å telle hvor mange meldinger det er. Vi kan bruke COUNT(tekst)
```sql
#d.
SELECT l.dato, t.kunde_id AS SenderID, t2.kunde_id AS MottakerID, l.tekst AS Innhold 
FROM logg AS l, telefon AS t, telefon AS t2
WHERE l.tlfnr_fra = t.tlfnr AND l.tlfnr_til = t2.tlfnr
AND tekst LIKE '%spion%'
ORDER BY l.dato;
```
